<head>
  <meta charset="UTF-8">
  <title>Dollphone Icon Pack</title>
  <meta property="og:title" value="Dollphone Icon Pack">
  <meta name="twitter:title" value="Dollphone Icon Pack">
  <!-- boilerplate -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:site_name" content="2GD4ME by Haley Halcyon">
  <meta name="twitter:site" content="@haruruchandesu">
  <meta name="twitter:creator" content="@haruruchandesu">
  <link rel="icon" href="/favicon.png">
  <!-- page metadata -->
  <meta name="description" content="A cute icon pack for Android that’s not too hyperactive.">
  <meta property="og:description" content="A cute icon pack for Android that’s not too hyperactive.">
  <meta name="twitter:description" content="A cute icon pack for Android that’s not too hyperactive.">
  <meta name="author" content="Haley Wakamatsu">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wdth,wght@12,75,800;12,100,500;12,100,800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="haley.css">
  <script src="dark.js"></script>
  <script src="abangelist.js"></script>
  <style>
    #header-fullwidth {
      width: 100%;
      overflow: hidden;
      background: #ff4080;
      border-radius: 0 0 4vw 4vw;
      position: relative;
    }

    #header-image {
      display: block;
      width: 100%;
      max-width: 1024px;
      height: auto;
      margin: 0 auto;
    }

    #header-text {
      position: absolute;
      font-size: min(2.5rem, 10vw);
      text-align: right;
      bottom: 1rem;
      right: 1rem;
      font-weight: 800;
      font-stretch: 75%;
      color: white;
      text-shadow: 0px 0px 4px black;
    }

    #search-module {
      margin: 8px;
    }

    .horizontal {
      display: flex;
      flex-direction: row;
    }

    .horizontal input {
      flex: 1 1 auto;
    }

    #search-result-list {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      padding: 0;
    }

    #search-result-list li {
      text-align: center;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    #search-result-list li img {
      width: 100%;
      aspect-ratio: 1;
    }
  </style>
  <script>
    const urlDrawable = "https://raw.githubusercontent.com/JapanYoshi/dollphone-foss/main/app/src/main/res/xml/drawable.xml";
    const urlImage = "https://raw.githubusercontent.com/JapanYoshi/dollphone-foss/main/app/src/main/res/drawable-nodpi/{}.png";
    const urlImageLink = "https://github.com/JapanYoshi/dollphone-foss/blob/main/app/src/main/res/drawable-nodpi/{}.png";
    const drawableList = {};

    async function searchIcon() {
      const status = document.getElementById("search-count");
      if (Object.keys(drawableList).length == 0) {
        status.innerText = "Downloading list of icons...";
        const response = await fetch(urlDrawable);
        if (!response.ok) {
          status.innerText = "Sorry, couldn’t download the list of icons. :(";
          return
        }
        const xml = await response.text();
        // I know I shouldn't use XML without a parser, but I know exactly which lines I want and that I can ignore the rest, so I'm doing it anyway
        for (let line of xml.split("\n")) {
          line = line.trim();
          if (!line.startsWith("<item drawable=\"") || !line.endsWith("\" />")) continue;
          let id = line.substring("<item drawable=\"".length, line.length - "\" />".length);
          drawableList[id.replace("a__", "").replaceAll("_", " ")] = id;
        }
        console.log(drawableList);
      }
      const searchTerm = document.getElementById("icon-search").value;
      if (searchTerm.length < 2) {
        status.innerText = "The search term is too short.";
        return
      }
      const results = Object.keys(drawableList).filter((value) => value.includes(searchTerm));
      status.innerText = `${results.length} results`;
      console.log(results);
      const searchList = document.getElementById("search-result-list");
      searchList.textContent = ""; // removes all children
      for (const result of results) {
        const el = document.createElement("li");
        const elImage = document.createElement("img");
        elImage.src = urlImage.replace("{}", drawableList[result]);
        el.appendChild(elImage);
        const elText = document.createElement("span");
        const elLink = document.createElement("a");
        elLink.innerText = result;
        elLink.href = urlImageLink.replace("{}", drawableList[result]);
        elText.append(elLink);
        el.appendChild(elText);
        searchList.appendChild(el);
      }
    }
  </script>
</head>
<body>
  <div id="header-fullwidth">
    <img id="header-image" src="https://raw.githubusercontent.com/JapanYoshi/dollphone-foss/main/fastlane/metadata/android/en-US/images/featureGraphic.png">
    <div id="header-text">Dollphone Icon Pack</div>
  </div>
  <div id="body">
    <div class="section">
      <h3>About</h3>
      
      <p>Dollphone is a cute icon pack that is very cute, but isn’t too hyper. The icons avoid overly saturated or dark colors, and softly bulge out the “straight” lines away from the center for a plushie-like look.</p>

      <p>Dollphone Icon Pack is a crystallization of years of passion for the “yurukawa” aesthetic.</p>

      <p>It is 100% free (<a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>) and <a href="https://github.com/JapanYoshi/dollphone-foss">open-source</a>, and can be downloaded from the following locations:</p>

      <ul id="download-location" class="bullet">
        <li><a href="https://github.com/JapanYoshi/dollphone-foss/releases">GitHub</a> (Definitely latest!)</li>
        <li><a href="https://f-droid.org/packages/me.x2gd4.dollphone">F-droid</a> (Takes up to 6 days to update, but you can check for updates through the F-droid app)</li>
        <li><a href="#">Google Play Store</a> (Coming soon, I can't get the hang of getting my app approved there)</li>
      </ul>

      <h3>Warning: Icon requests</h3>
      <p><b>I am currently ABSOLUTELY MIRED in icon requests!</b> <a href="https://github.com/JapanYoshi/dollphone-foss/issues?q=is%3Aopen+is%3Aissue+label%3A%22icon+request%22">Take a look at how many icon requests I have logged on my GitHub.</a></p>
      <p>If you can help me make these icons, let me know by commenting on an issue. (But make sure that I haven't assigned myself to the Issue already)</p>
    </div>
    <div class="section">
      <h3>Search</h3>
      
      <p>Do I have an icon for your favorite app? If so, you can preview it here. If not, the app has an in-built request feature anyway!</p>

      <div id="search-module">
        <div class="horizontal">
          <input id="icon-search" placeholder="try “qr”, “google”, or “gacha life”..."/>
          <button type="button" onclick="searchIcon()">search</button>
        </div>
        <hr/>
        <div id="search-results">
          <div id="search-count">0/0 results</div>
          <ul id="search-result-list">

          </ul>
        </div>
      </div>
    </div>
  </div>
  <div id="fullwidth">
    <a class="biglink" href="https://ko-fi.com/itsspelledhaley">Donations</a><br>
    <a class="biglink" href="../">Back</a><br>
      <span>coded with &hearts; by Haley Halcyon</span>
  </div>
</body>